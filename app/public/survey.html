<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tag Champs Survey</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>



    <script src="https://code.jquery.com/jquery.js"></script>
</head>

<style>
    .form-control {
      margin-left: 20px;
      margin-bottom: 30px;
    }

    img {
        height: fit-content;
    }

    body {
        background: url("https://images.pexels.com/photos/2523959/pexels-photo-2523959.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260")
    }

  h2, h5 {
      color: aquamarine;
  }

  .modal-header {
 
  background-repeat: no-repeat;
  background-size: cover;
}

h4.modal-title {
  font-family: 'Lora', serif;
  text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.6);
  text-align: center;
  color: white;
}

button.close {
  color: white;
}

.modal-body {
	text-align: center;
}

img#friend-photo {
	max-width: 60%;
	max-height:none;
}



</style>

<body>
    <div class="container">
        <div class="col s12 m10">
            <h2 class="header center">Take The Survey!</h2>
            <h5 class="header center">1 = Strongly Disagree | 5 = Strongly Agree</h5>
            <div class="card horizontal">
                <div class="card-image">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5d/Lucha_Masks.jpg">
                </div>
                <div class="card-stacked">
                    <div class="card-content">
                            <div class="form-group">
                                    <label for="name">Name (required)</label>
                                    <input type="text" class="form-control" id="name" required>
                                  </div>
            
                                  <div class="form-group">
                                    <label for="photo">Link to Photo (required)</label>
                                    <input type="text" class="form-control" id="photo" required>
                                  </div>
                                </form>
                            </div>

                            <div class="form-control">
                        <form action="#">
                            <p>
                                <h6>You value money very highly.</h6>
                                <label>
                                    <input name="q1" type="radio" id="Radio1" value="1" />
                                    <span>1</span>
                                </label>

                                <label>
                                    <input name="q1" type="radio" id="Radio2" value="2" />
                                    <span>2</span>
                                </label>

                                <label>
                                    <input name="q1" type="radio" id="Radio3" value="3" />
                                    <span>3</span>
                                </label>

                                <label>
                                    <input name="q1" type="radio" id="Radio4" value="4" />
                                    <span>4</span>
                                </label>

                                <label>
                                    <input name="q1" type="radio" id="Radio5" value="5" />
                                    <span>5</span>
                                </label>
                            </p>
                            <br>
                            <p>
                                <h6>You love to make people laugh.</h6>
                                <label>
                                    <input name="q2" type="radio" id="Radio1" value="1" />
                                    <span>1</span>
                                </label>

                                <label>
                                    <input name="q2" type="radio" id="Radio2" value="2" />
                                    <span>2</span>
                                </label>

                                <label>
                                    <input name="q2" type="radio" id="Radio3" value="3" />
                                    <span>3</span>
                                </label>

                                <label>
                                    <input name="q2" type="radio" id="Radio4" value="4" />
                                    <span>4</span>
                                </label>

                                <label>
                                    <input name="q2" type="radio" id="Radio5" value="5" />
                                    <span>5</span>
                                </label>
                            </p>

                            <br>

                            <p>
                                <h6>You think violence is always the answer.</h6>
                                <label>
                                    <input name="q3" type="radio" id="Radio1" value="1" />
                                    <span>1</span>
                                </label>

                                <label>
                                    <input name="q3" type="radio" id="Radio2" value="2" />
                                    <span>2</span>
                                </label>

                                <label>
                                    <input name="q3" type="radio" id="Radio3" value="3" />
                                    <span>3</span>
                                </label>

                                <label>
                                    <input name="q3" type="radio" id="Radio4" value="4" />
                                    <span>4</span>
                                </label>

                                <label>
                                    <input name="q3" type="radio" id="Radio5" value="5" />
                                    <span>5</span>
                                </label>
                            </p>

                            <br>

                            <p>
                                <h6>Your appearance is very important to you.</h6>
                                <label>
                                    <input name="q4" type="radio" id="Radio1" value="1" />
                                    <span>1</span>
                                </label>

                                <label>
                                    <input name="q4" type="radio" id="Radio2" value="2" />
                                    <span>2</span>
                                </label>

                                <label>
                                    <input name="q4" type="radio" id="Radio3" value="3" />
                                    <span>3</span>
                                </label>

                                <label>
                                    <input name="q4" type="radio" id="Radio4" value="4" />
                                    <span>4</span>
                                </label>

                                <label>
                                    <input name="q4" type="radio" id="Radio5" value="5" />
                                    <span>5</span>
                                </label>
                            </p>

                            <br>

                            <p>
                                    <h6>English is your first language.</h6>
                                    <label>
                                        <input name="q5" type="radio" id="Radio1" value="1" />
                                        <span>1</span>
                                    </label>
    
                                    <label>
                                        <input name="q5" type="radio" id="Radio2" value="2" />
                                        <span>2</span>
                                    </label>
    
                                    <label>
                                        <input name="q5" type="radio" id="Radio3" value="3" />
                                        <span>3</span>
                                    </label>
    
                                    <label>
                                        <input name="q5" type="radio" id="Radio4" value="4" />
                                        <span>4</span>
                                    </label>
    
                                    <label>
                                        <input name="q5" type="radio" id="Radio5" value="5" />
                                        <span>5</span>
                                    </label>
                                </p>
    
                                <br>

                            <p>
                                <h6>You like cats more than people.</h6>
                                <label>
                                    <input name="q6" type="radio" id="Radio1" value="1" />
                                    <span>1</span>
                                </label>

                                <label>
                                    <input name="q6" type="radio" id="Radio2" value="2" />
                                    <span>2</span>
                                </label>

                                <label>
                                    <input name="q6" type="radio" id="Radio3" value="3" />
                                    <span>3</span>
                                </label>

                                <label>
                                    <input name="q6" type="radio" id="Radio4" value="4" />
                                    <span>4</span>
                                </label>

                                <label>
                                    <input name="q6" type="radio" id="Radio5" value="5" />
                                    <span>5</span>
                                </label>
                            </p>

                            <br>

                            <p>
                                <h6>You consider yourself a great dancer.</h6>
                                <label>
                                    <input name="q7" type="radio" id="Radio1" value="1" />
                                    <span>1</span>
                                </label>

                                <label>
                                    <input name="q7" type="radio" id="Radio2" value="2" />
                                    <span>2</span>
                                </label>

                                <label>
                                    <input name="q7" type="radio" id="Radio3" value="3" />
                                    <span>3</span>
                                </label>

                                <label>
                                    <input name="q7" type="radio" id="Radio4" value="4" />
                                    <span>4</span>
                                </label>

                                <label>
                                    <input name="q7" type="radio" id="Radio5" value="5" />
                                    <span>5</span>
                                </label>
                            </p>

                            <br>
                        
                            <p>
                                <h6>You think of yourself as a team player.</h6>
                                <label>
                                    <input name="q8" type="radio" id="Radio1" value="1" />
                                    <span>1</span>
                                </label>

                                <label>
                                    <input name="q8" type="radio" id="Radio2" value="2" />
                                    <span>2</span>
                                </label>

                                <label>
                                    <input name="q8" type="radio" id="Radio3" value="3" />
                                    <span>3</span>
                                </label>

                                <label>
                                    <input name="q8" type="radio" id="Radio4" value="4" />
                                    <span>4</span>
                                </label>

                                <label>
                                    <input name="q8" type="radio" id="Radio5" value="5" />
                                    <span>5</span>
                                </label>
                            </p>

                            <br>

                            <p>
                                    <h6>Loyalty is very important to you.</h6>
                                    <label>
                                        <input name="q9" type="radio" id="Radio1" value="1" />
                                        <span>1</span>
                                    </label>
    
                                    <label>
                                        <input name="q9" type="radio" id="Radio2" value="2" />
                                        <span>2</span>
                                    </label>
    
                                    <label>
                                        <input name="q9" type="radio" id="Radio3" value="3" />
                                        <span>3</span>
                                    </label>
    
                                    <label>
                                        <input name="q9" type="radio" id="Radio4" value="4" />
                                        <span>4</span>
                                    </label>
    
                                    <label>
                                        <input name="q9" type="radio" id="Radio5" value="5" />
                                        <span>5</span>
                                    </label>
                                </p>

                                <br>

                                
                                    <h6>You have a very particular diet.</h6>
                                    <label>
                                        <input name="q10" type="radio" id="Radio1" value="1" />
                                        <span>1</span>
                                    </label>
    
                                    <label>
                                        <input name="q10" type="radio" id="Radio2" value="2" />
                                        <span>2</span>
                                    </label>
    
                                    <label>
                                        <input name="q10" type="radio" id="Radio3" value="3" />
                                        <span>3</span>
                                    </label>
    
                                    <label>
                                        <input name="q10" type="radio" id="Radio4" value="4" />
                                        <span>4</span>
                                    </label>
    
                                    <label>
                                        <input name="q10" type="radio" id="Radio5" value="5" />
                                        <span>5</span>
                                    </label>

                                    <br>
                                    <br>
    
                                    <button class="btn modal-trigger" id="submit" name="action" data-target="#myModal">Submit
                                          </button>


                        </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="bestFriend">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="bestFriend">You've made a friend!</h4>
                </div>
                <div class="modal-body" id="friend-info">
                          <h5 id="friend-name"></h5>
                          <img id="friend-photo" src="" alt="Meet your new friend!">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

     



</body>

</html>



<script type="text/javascript">
  $(document).ready(function(){
    $('#myModal').modal();
  });

    var allAnswers = [];
    $("#submit").on("click", function(event){
        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            answers: function(){
                for (i=1; i < 11; i++){
                    var answer = $('input[name="q'+i+'"]:checked').val();
                    allAnswers.push(parseInt(answer));
                }
                return allAnswers;
            }
        };
        console.log(newFriend);
        $.post("/api/friends", newFriend, function(data){
            if (data) {
                alert("Find Your Tag Team Partner!");
            }
            else {
                alert("OH NO! Something went wrong!");
            }
            
            $("#name").val("");
            $("#photo").val("");
            $('input[type="radio"]').attr('checked', false);
        }).done(function() {
            
            $.ajax({
                    url: "/api/friends",
                    method: "GET",
                    datatype: 'json'
            }).done(function(res, err) {
                if(err) {
                    console.log(err);
                }
                
                var current = res[res.length-1];
            
                var bestFriend = current.bestie;
                console.log(bestFriend);
                $("#friend-name").text("Hi " + current.name + ", my name is " + bestFriend.name + "!");
                $("img#friend-photo").attr("src", bestFriend.photo);
            });
        }); 
    }); 
</script>